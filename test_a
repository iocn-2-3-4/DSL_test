import groovy.io.FileType
import hudson.FilePath
import hudson.*

shell('echo $WORKSPACE')
def folderName = 'test_a_folder'
def path_to_workspace = "/var/lib/jenkins/workspace/${folderName}"

folder("${folderName}") {
    displayName("${folderName}")
    description('Folder for project test_a')
}


job("${folderName}/create_jobs") {
    logRotator(-1, 10)
    scm {
        github('iocn-2-3-4/DSL_test', 'master')
    }
    triggers {
        // githubPush()
        scm('H/2 * * * *')
    }
    steps {

        dsl {
            external "jobs"
        }
    }
}

pipelineJob("${folderName}/${folderName}-pipeline") {
    definition {
        cpsScm {
            scm {
                github('iocn-2-3-4/DSL_test', 'master')
                scriptPath('jenkinsfile')
            }
        }
    }
}
